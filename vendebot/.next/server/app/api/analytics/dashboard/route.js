"use strict";(()=>{var e={};e.id=358,e.ids=[358],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},10255:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>h,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>m});var o={};a.r(o),a.d(o,{GET:()=>c});var r=a(49303),n=a(88716),s=a(60670),i=a(87070);let u=new(a(53524)).PrismaClient;async function c(e){try{let{searchParams:t}=new URL(e.url);t.get("businessId");let a=new Date;a.setDate(a.getDate()-7);let o={totalMessages:Math.floor(50*Math.random())+30,automaticResponses:Math.floor(45*Math.random())+25,uniqueCustomers:Math.floor(25*Math.random())+15,averageResponseTime:(2*Math.random()+1).toFixed(1)+"s",responseRate:Math.floor(15*Math.random())+85,topCategories:[{category:"Horarios",count:Math.floor(10*Math.random())+10},{category:"Productos",count:Math.floor(8*Math.random())+8},{category:"Precios",count:Math.floor(6*Math.random())+5},{category:"Ubicaci\xf3n",count:Math.floor(5*Math.random())+4},{category:"Env\xedos",count:Math.floor(4*Math.random())+3}],recentMessages:[{id:"1",content:"Hola, \xbfcu\xe1l es el horario de atenci\xf3n?",response:"\xa1Hola! \uD83D\uDC4B Nuestro horario de atenci\xf3n es Lunes a Viernes de 9:00 a 19:00hrs y S\xe1bados de 10:00 a 14:00hrs",timestamp:new Date(Date.now()-3e5).toISOString(),fromNumber:"+56912345678"},{id:"2",content:"\xbfTienen stock del producto X?",response:"\xa1Hola! Para consultar stock disponible, cu\xe9ntame qu\xe9 producto necesitas y te confirmo disponibilidad \uD83D\uDCE6",timestamp:new Date(Date.now()-72e4).toISOString(),fromNumber:"+56987654321"},{id:"3",content:"\xbfD\xf3nde est\xe1n ubicados?",response:"\uD83D\uDCCD Estamos ubicados en [DIRECCION]. Tambi\xe9n puedes comprar online con despacho a domicilio!",timestamp:new Date(Date.now()-108e4).toISOString(),fromNumber:"+56911111111"},{id:"4",content:"\xbfCu\xe1nto cuesta el env\xedo?",response:"Hacemos env\xedos a todo Chile \uD83D\uDE9A Santiago: 24-48hrs, Regiones: 2-5 d\xedas h\xe1biles. \xbfA qu\xe9 ciudad ser\xeda?",timestamp:new Date(Date.now()-15e5).toISOString(),fromNumber:"+56922222222"}],dailyStats:Array.from({length:7},(e,t)=>{let a=new Date;return a.setDate(a.getDate()-(6-t)),{date:a.toISOString().split("T")[0],messages:Math.floor(15*Math.random())+5,responses:Math.floor(12*Math.random())+4}}),botStatus:{isActive:!0,lastActivity:new Date(Date.now()-3e5).toISOString(),uptime:"99.8%",messageQueue:0}};return o.recentMessages=o.recentMessages.map(e=>({...e,timeAgo:function(e){let t=Math.floor((new Date().getTime()-e.getTime())/6e4);if(t<1)return"Hace unos segundos";if(1===t)return"Hace 1 minuto";if(t<60)return`Hace ${t} minutos`;let a=Math.floor(t/60);if(1===a)return"Hace 1 hora";if(a<24)return`Hace ${a} horas`;let o=Math.floor(a/24);return 1===o?"Hace 1 d\xeda":`Hace ${o} d\xedas`}(new Date(e.timestamp))})),i.NextResponse.json({success:!0,data:o,timestamp:new Date().toISOString()})}catch(e){return console.error("Dashboard analytics error:",e),i.NextResponse.json({error:"Error fetching dashboard data"},{status:500})}finally{await u.$disconnect()}}let d=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/analytics/dashboard/route",pathname:"/api/analytics/dashboard",filename:"route",bundlePath:"app/api/analytics/dashboard/route"},resolvedPagePath:"C:\\Users\\CODING\\Documents\\NEWERA\\VENDEBOT\\vendebot\\src\\app\\api\\analytics\\dashboard\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:p}=d,h="/api/analytics/dashboard/route";function g(){return(0,s.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:m})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),o=t.X(0,[276,972],()=>a(10255));module.exports=o})();