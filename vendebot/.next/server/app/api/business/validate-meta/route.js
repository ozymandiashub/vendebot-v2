"use strict";(()=>{var e={};e.id=331,e.ids=[331],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},43143:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>p});var r={};t.r(r),t.d(r,{POST:()=>u});var a=t(49303),n=t(88716),o=t(60670),i=t(87070);async function u(e){try{let{accessToken:s,phoneNumberId:t}=await e.json();if(!s||!t)return i.NextResponse.json({error:"Access Token y Phone Number ID son requeridos"},{status:400});let r=`https://graph.facebook.com/v18.0/${t}`,a=await fetch(r,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok){let e=await a.json();return i.NextResponse.json({valid:!1,error:"Credenciales inv\xe1lidas",details:e.error?.message||"Error desconocido",suggestions:["Verifica que el Access Token sea permanente (no temporal)","Confirma que el Phone Number ID sea correcto","Aseg\xfarate de que los permisos whatsapp_business_messaging est\xe9n activos"]})}let n=await a.json();return i.NextResponse.json({valid:!0,message:"âœ… Credenciales v\xe1lidas",phoneInfo:{displayPhoneNumber:n.display_phone_number,verifiedName:n.verified_name,id:n.id},nextSteps:["Las credenciales son correctas","Puedes proceder a configurar el webhook","El bot est\xe1 listo para recibir mensajes"]})}catch(e){return console.error("Error validating Meta credentials:",e),i.NextResponse.json({valid:!1,error:"Error de conexi\xf3n",details:"No se pudo conectar con Meta API",suggestions:["Verifica tu conexi\xf3n a internet","Confirma que las credenciales est\xe9n bien copiadas","Intenta nuevamente en unos minutos"]},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/business/validate-meta/route",pathname:"/api/business/validate-meta",filename:"route",bundlePath:"app/api/business/validate-meta/route"},resolvedPagePath:"C:\\Users\\CODING\\Documents\\NEWERA\\VENDEBOT\\vendebot\\src\\app\\api\\business\\validate-meta\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:p,serverHooks:l}=d,m="/api/business/validate-meta/route";function v(){return(0,o.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:p})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,972],()=>t(43143));module.exports=r})();