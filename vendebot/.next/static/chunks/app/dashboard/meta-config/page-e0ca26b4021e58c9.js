(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[116],{3407:function(e,s,r){Promise.resolve().then(r.bind(r,1039))},1039:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return t}});var l=r(7437),n=r(2265),a=r(9820),i=r(2381);function t(){var e,s;let[r,t]=(0,n.useState)({businessAccountId:"",accessToken:"",phoneNumberId:"",businessPhone:"+56979171217"}),[d,c]=(0,n.useState)(!1),[o,x]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[m,b]=(0,n.useState)(null),g=async()=>{if(!r.accessToken||!r.phoneNumberId){alert("Por favor ingresa Access Token y Phone Number ID primero");return}x(!0),h(null);try{let e=await fetch("/api/business/validate-meta",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:r.accessToken,phoneNumberId:r.phoneNumberId})}),s=await e.json();h(s)}catch(e){console.error("Error:",e),h({valid:!1,error:"Error de conexi\xf3n",details:"No se pudo validar las credenciales"})}finally{x(!1)}},p=async e=>{e.preventDefault(),c(!0),b(null);try{let e=await fetch("/api/business/meta-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,webhookVerifyToken:"vendebot_webhook_2025_secure_token",userId:"demo-user-id"})}),s=await e.json();b(s),s.success&&alert("✅ \xa1Meta WhatsApp Business configurado correctamente!")}catch(e){console.error("Error:",e),b({error:"Error de conexi\xf3n"})}finally{c(!1)}};return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"\uD83D\uDCF1 Configurar Meta WhatsApp Business"}),(0,l.jsx)("p",{className:"text-xl text-gray-600",children:"Conecta tu n\xfamero de WhatsApp Business verificado con VendeBot"})]}),(0,l.jsxs)(a.Zb,{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\uD83D\uDCCB Antes de empezar"}),(0,l.jsxs)("div",{className:"space-y-4 text-lg text-gray-700",children:[(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("span",{className:"text-green-600 font-bold",children:"✅"}),(0,l.jsx)("span",{children:"Tu n\xfamero de WhatsApp debe estar verificado en Meta Business Manager"})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("span",{className:"text-green-600 font-bold",children:"✅"}),(0,l.jsx)("span",{children:"Debes tener una aplicaci\xf3n creada en Meta for Developers"})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("span",{className:"text-blue-600 font-bold",children:"\uD83D\uDCF1"}),(0,l.jsx)("span",{children:"Necesitas obtener las credenciales desde Meta Business Manager"})]})]})]}),(0,l.jsxs)(a.Zb,{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"\uD83D\uDD11 Credenciales de Meta"}),(0,l.jsxs)("form",{onSubmit:p,className:"space-y-6",children:["            ",(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-semibold text-gray-900 mb-2",children:"\uD83C\uDFE2 Business Account ID"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 123456789012345 (solo n\xfameros)",value:r.businessAccountId,onChange:e=>t({...r,businessAccountId:e.target.value})}),(0,l.jsxs)("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-blue-800 font-semibold",children:"\uD83D\uDCCD \xbfD\xf3nde encontrarlo?"}),(0,l.jsxs)("ol",{className:"text-blue-700 text-sm mt-1 space-y-1",children:[(0,l.jsxs)("li",{children:["1. Ve a ",(0,l.jsx)("strong",{children:"business.facebook.com"})]}),(0,l.jsxs)("li",{children:["2. Clic en ⚙️ ",(0,l.jsx)("strong",{children:'"Configuraci\xf3n de la empresa"'})]}),(0,l.jsxs)("li",{children:["3. Clic en ",(0,l.jsx)("strong",{children:'"Informaci\xf3n de la empresa"'})]}),(0,l.jsx)("li",{children:"4. Copia el ID que aparece bajo el nombre"})]})]})]}),"            ",(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-semibold text-gray-900 mb-2",children:"\uD83D\uDD11 Access Token (Permanente)"}),(0,l.jsx)("input",{type:"password",required:!0,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: EAA... (empieza con EAA)",value:r.accessToken,onChange:e=>t({...r,accessToken:e.target.value})}),(0,l.jsxs)("div",{className:"mt-2 p-3 bg-green-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-green-800 font-semibold",children:"\uD83D\uDCCD \xbfD\xf3nde encontrarlo?"}),(0,l.jsxs)("ol",{className:"text-green-700 text-sm mt-1 space-y-1",children:[(0,l.jsxs)("li",{children:["1. Ve a ",(0,l.jsx)("strong",{children:"developers.facebook.com"})]}),(0,l.jsxs)("li",{children:["2. Crea una app tipo ",(0,l.jsx)("strong",{children:'"Empresa"'})]}),(0,l.jsxs)("li",{children:["3. Agrega ",(0,l.jsx)("strong",{children:'"WhatsApp Business"'})]}),(0,l.jsxs)("li",{children:["4. Ve a ",(0,l.jsx)("strong",{children:'"API Setup"'})]}),(0,l.jsxs)("li",{children:["5. Genera ",(0,l.jsx)("strong",{children:'"Access Token Permanente"'})]})]}),(0,l.jsx)("p",{className:"text-red-600 font-semibold mt-2",children:"⚠️ \xa1MANT\xc9N ESTE TOKEN SECRETO!"})]})]}),"            ",(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-semibold text-gray-900 mb-2",children:"\uD83D\uDCF1 Phone Number ID"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 987654321098765 (n\xfamero largo)",value:r.phoneNumberId,onChange:e=>t({...r,phoneNumberId:e.target.value})}),(0,l.jsxs)("div",{className:"mt-2 p-3 bg-purple-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-purple-800 font-semibold",children:"\uD83D\uDCCD \xbfD\xf3nde encontrarlo?"}),(0,l.jsxs)("ol",{className:"text-purple-700 text-sm mt-1 space-y-1",children:[(0,l.jsx)("li",{children:"1. En tu app de WhatsApp Business"}),(0,l.jsxs)("li",{children:["2. Ve a ",(0,l.jsx)("strong",{children:'"API Setup"'})]}),(0,l.jsxs)("li",{children:["3. Busca la secci\xf3n ",(0,l.jsx)("strong",{children:'"From"'})]}),(0,l.jsx)("li",{children:"4. Copia el ID debajo de tu n\xfamero de tel\xe9fono"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-lg font-semibold text-gray-900 mb-2",children:"N\xfamero de WhatsApp Business"}),(0,l.jsx)("input",{type:"tel",required:!0,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: +56912345678",value:r.businessPhone,onChange:e=>t({...r,businessPhone:e.target.value})}),(0,l.jsx)("p",{className:"text-gray-600 mt-1",children:"\uD83D\uDCF1 Tu n\xfamero de WhatsApp verificado (incluye c\xf3digo de pa\xeds)"})]}),"            ",(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(i.z,{type:"button",variant:"secondary",size:"large",disabled:o||!r.accessToken||!r.phoneNumberId,onClick:g,className:"flex-1",children:o?"\uD83D\uDD0D Validando...":"\uD83E\uDDEA Validar Credenciales"}),(0,l.jsx)(i.z,{type:"submit",variant:"primary",size:"large",disabled:d||o,className:"flex-1",children:d?"⏳ Configurando...":"\uD83D\uDE80 Configurar WhatsApp Business"})]})]})]}),u&&(0,l.jsx)(a.Zb,{className:"mt-6",children:u.valid?(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-green-800 mb-4",children:"✅ \xa1Credenciales V\xe1lidas!"}),(0,l.jsxs)("div",{className:"space-y-3",children:[u.phoneInfo&&(0,l.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-green-800",children:"\uD83D\uDCF1 Informaci\xf3n del N\xfamero:"}),(0,l.jsxs)("ul",{className:"text-green-700 mt-2 space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"N\xfamero:"})," ",u.phoneInfo.displayPhoneNumber]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Nombre verificado:"})," ",u.phoneInfo.verifiedName]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"ID:"})," ",u.phoneInfo.id]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-green-800",children:"\uD83C\uDFAF Pr\xf3ximos pasos:"}),(0,l.jsx)("ol",{className:"list-decimal list-inside text-green-700 mt-2 space-y-1",children:null===(e=u.nextSteps)||void 0===e?void 0:e.map((e,s)=>(0,l.jsx)("li",{children:e},s))})]})]})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-red-800 mb-4",children:"❌ Error de Validaci\xf3n"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,l.jsxs)("p",{className:"text-red-700",children:[(0,l.jsx)("strong",{children:"Error:"})," ",u.error]}),u.details&&(0,l.jsxs)("p",{className:"text-red-600 mt-1",children:[(0,l.jsx)("strong",{children:"Detalles:"})," ",u.details]})]}),u.suggestions&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-red-800",children:"\uD83D\uDCA1 Sugerencias:"}),(0,l.jsx)("ul",{className:"list-disc list-inside text-red-700 mt-2 space-y-1",children:u.suggestions.map((e,s)=>(0,l.jsx)("li",{children:e},s))})]})]})]})}),m&&(0,l.jsx)(a.Zb,{className:"mt-8",children:m.success?(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-green-800 mb-4",children:"✅ \xa1Configuraci\xf3n Exitosa!"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"\uD83D\uDCCB Pr\xf3ximos pasos:"}),(0,l.jsx)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 mt-2",children:null===(s=m.nextSteps)||void 0===s?void 0:s.map((e,s)=>(0,l.jsx)("li",{children:e},s))})]}),m.webhookConfig&&(0,l.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-blue-900 mb-2",children:"\uD83D\uDD17 Configuraci\xf3n del Webhook"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"URL:"})," ",(0,l.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded",children:m.webhookConfig.url})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Verify Token:"})," ",(0,l.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded",children:m.webhookConfig.verifyToken})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Fields:"})," ",m.webhookConfig.fields.join(", ")]})]})]})]})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-red-800 mb-4",children:"❌ Error en la Configuraci\xf3n"}),(0,l.jsx)("p",{className:"text-red-700",children:m.error})]})}),"        ",(0,l.jsxs)(a.Zb,{className:"mt-8",children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"❓ Enlaces Directos"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\uD83C\uDFE2 Meta Business Manager"}),(0,l.jsx)("p",{className:"text-gray-600 mb-3",children:"Para obtener Business Account ID"}),(0,l.jsx)(i.z,{type:"button",variant:"secondary",size:"medium",className:"w-full",onClick:()=>window.open("https://business.facebook.com","_blank"),children:"\uD83D\uDD17 Abrir Business Manager"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\uD83D\uDC68‍\uD83D\uDCBB Meta for Developers"}),(0,l.jsx)("p",{className:"text-gray-600 mb-3",children:"Para crear app y obtener tokens"}),(0,l.jsx)(i.z,{type:"button",variant:"secondary",size:"medium",className:"w-full",onClick:()=>window.open("https://developers.facebook.com","_blank"),children:"\uD83D\uDD17 Abrir Developers"})]})]}),(0,l.jsxs)("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"\uD83D\uDCCB Orden recomendado:"}),(0,l.jsxs)("ol",{className:"list-decimal list-inside text-yellow-700 space-y-1",children:[(0,l.jsxs)("li",{children:["Obt\xe9n ",(0,l.jsx)("strong",{children:"Business Account ID"})," desde Business Manager"]}),(0,l.jsxs)("li",{children:["Crea app en Developers y obt\xe9n ",(0,l.jsx)("strong",{children:"Access Token"})]}),(0,l.jsxs)("li",{children:["Copia ",(0,l.jsx)("strong",{children:"Phone Number ID"})," desde la misma app"]}),(0,l.jsx)("li",{children:"Ingresa todo aqu\xed y configura"})]})]})]})]})})}},2381:function(e,s,r){"use strict";r.d(s,{z:function(){return a}});var l=r(7437);r(2265);var n=r(1994);function a(e){let{variant:s="primary",size:r="large",children:a,onClick:i,disabled:t=!1,type:d="button",className:c}=e;return(0,l.jsx)("button",{type:d,onClick:i,disabled:t,className:(0,n.W)("font-semibold rounded-lg transition-colors focus:outline-none focus:ring-4 focus:ring-opacity-50 shadow-md",{large:"px-8 py-4 text-lg min-h-[56px]",medium:"px-6 py-3 text-base min-h-[48px]",small:"px-4 py-2 text-sm min-h-[40px]"}[r],{primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-300 disabled:bg-blue-300",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-900 focus:ring-gray-300 disabled:bg-gray-100",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-300 disabled:bg-green-300",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-300 disabled:bg-red-300"}[s],t&&"cursor-not-allowed opacity-60",c),children:a})}},9820:function(e,s,r){"use strict";r.d(s,{Zb:function(){return a},i9:function(){return i}});var l=r(7437);r(2265);var n=r(1994);function a(e){let{children:s,className:r,padding:a="large",shadow:i=!0}=e;return(0,l.jsx)("div",{className:(0,n.W)("bg-white rounded-lg border border-gray-200",i&&"shadow-lg",{none:"",small:"p-4",medium:"p-6",large:"p-8"}[a],r),children:s})}function i(e){let{title:s,value:r,trend:i,icon:t,color:d="blue"}=e;return(0,l.jsxs)(a,{className:(0,n.W)("text-center",{blue:"bg-blue-50 border-blue-200",green:"bg-green-50 border-green-200",yellow:"bg-yellow-50 border-yellow-200",red:"bg-red-50 border-red-200"}[d]),padding:"medium",children:[t&&(0,l.jsx)("div",{className:(0,n.W)("text-4xl mb-2",{blue:"text-blue-600",green:"text-green-600",yellow:"text-yellow-600",red:"text-red-600"}[d]),children:t}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:s}),(0,l.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:r}),i&&(0,l.jsx)("div",{className:"text-sm text-gray-600",children:i})]})}s.ZP=e=>{let{title:s,description:r,imageUrl:n,footer:a}=e;return(0,l.jsxs)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[n&&(0,l.jsx)("img",{src:n,alt:s,className:"w-full h-48 object-cover"}),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:s}),(0,l.jsx)("p",{className:"text-gray-700",children:r})]}),a&&(0,l.jsx)("div",{className:"bg-gray-100 p-4",children:a})]})}},1994:function(e,s,r){"use strict";function l(){for(var e,s,r=0,l="",n=arguments.length;r<n;r++)(e=arguments[r])&&(s=function e(s){var r,l,n="";if("string"==typeof s||"number"==typeof s)n+=s;else if("object"==typeof s){if(Array.isArray(s)){var a=s.length;for(r=0;r<a;r++)s[r]&&(l=e(s[r]))&&(n&&(n+=" "),n+=l)}else for(l in s)s[l]&&(n&&(n+=" "),n+=l)}return n}(e))&&(l&&(l+=" "),l+=s);return l}r.d(s,{W:function(){return l}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3407)}),_N_E=e.O()}]);